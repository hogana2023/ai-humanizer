# API Design for AI Humanizer Web App

## Overview
This document outlines the API design for the AI Humanizer web application. The API will provide endpoints for text humanization, AI detection checking, and other related functionalities.

## Base URL
For local development: `http://localhost:3000/api`
For production: `https://ai-humanizer.example.com/api`

## API Endpoints

### 1. Humanize Text
Transforms AI-generated text into human-like content.

**Endpoint:** `/humanize`
**Method:** POST
**Content-Type:** application/json

**Request Body:**
```json
{
  "text": "AI-generated text to humanize",
  "mode": "standard",
  "intensity": 0.7,
  "settings": {
    "perplexity": 0.6,
    "burstiness": 0.8,
    "vocabularyDiversity": 0.7,
    "sentenceVariation": 0.6,
    "addHumanElements": true,
    "preserveFormatting": true
  }
}
```

**Parameters:**
- `text` (string, required): The AI-generated text to humanize
- `mode` (string, optional): Humanization mode
  - Options: "standard", "academic", "creative", "casual"
  - Default: "standard"
- `intensity` (number, optional): Overall humanization intensity (0.1-1.0)
  - Default: 0.7
- `settings` (object, optional): Advanced settings
  - `perplexity` (number, optional): Level of unpredictability (0.1-1.0)
  - `burstiness` (number, optional): Sentence variation level (0.1-1.0)
  - `vocabularyDiversity` (number, optional): Word choice diversity (0.1-1.0)
  - `sentenceVariation` (number, optional): Sentence structure variation (0.1-1.0)
  - `addHumanElements` (boolean, optional): Add human-like elements
  - `preserveFormatting` (boolean, optional): Maintain original formatting

**Response:**
```json
{
  "success": true,
  "humanizedText": "Transformed human-like text",
  "stats": {
    "originalLength": 123,
    "humanizedLength": 128,
    "processingTime": "0.5s",
    "detectionScores": {
      "perplexity": 0.8,
      "burstiness": 0.7,
      "overallHumanScore": 0.85
    },
    "changes": {
      "sentencesRestructured": 5,
      "vocabularyEnhanced": 12,
      "humanElementsAdded": 3
    }
  }
}
```

**Error Response:**
```json
{
  "success": false,
  "error": "Error message",
  "code": "ERROR_CODE"
}
```

**Status Codes:**
- 200: Success
- 400: Bad Request (invalid parameters)
- 413: Payload Too Large (text exceeds maximum length)
- 429: Too Many Requests (rate limit exceeded)
- 500: Internal Server Error

### 2. Check AI Detection
Analyzes text to determine if it would be detected as AI-generated.

**Endpoint:** `/detect`
**Method:** POST
**Content-Type:** application/json

**Request Body:**
```json
{
  "text": "Text to check for AI detection"
}
```

**Parameters:**
- `text` (string, required): The text to analyze

**Response:**
```json
{
  "success": true,
  "isAIGenerated": true,
  "confidence": 0.85,
  "scores": {
    "perplexity": 0.3,
    "burstiness": 0.4,
    "overallHumanScore": 0.15
  },
  "analysis": {
    "sentenceStructure": "Low variation detected",
    "vocabularyDiversity": "Limited word choice variety",
    "commonPatterns": ["Repetitive transitions", "Predictable phrasing"]
  }
}
```

**Error Response:**
```json
{
  "success": false,
  "error": "Error message",
  "code": "ERROR_CODE"
}
```

**Status Codes:**
- 200: Success
- 400: Bad Request (invalid parameters)
- 413: Payload Too Large (text exceeds maximum length)
- 429: Too Many Requests (rate limit exceeded)
- 500: Internal Server Error

### 3. Get Sample Text
Provides sample AI-generated text for testing.

**Endpoint:** `/samples`
**Method:** GET

**Query Parameters:**
- `type` (string, optional): Type of sample text
  - Options: "essay", "article", "technical", "creative"
  - Default: "essay"
- `length` (string, optional): Length of sample text
  - Options: "short", "medium", "long"
  - Default: "medium"

**Response:**
```json
{
  "success": true,
  "sampleText": "Sample AI-generated text...",
  "metadata": {
    "type": "essay",
    "length": "medium",
    "wordCount": 250,
    "source": "Generated by ChatGPT"
  }
}
```

**Status Codes:**
- 200: Success
- 400: Bad Request (invalid parameters)
- 429: Too Many Requests (rate limit exceeded)
- 500: Internal Server Error

## Rate Limiting
- Free tier: 5 requests per minute, 100 requests per day
- Maximum text length: 5,000 characters per request

## Error Codes
- `INVALID_PARAMETERS`: Request contains invalid parameters
- `TEXT_TOO_LONG`: Text exceeds maximum length
- `RATE_LIMIT_EXCEEDED`: Rate limit has been exceeded
- `PROCESSING_ERROR`: Error occurred during text processing
- `INTERNAL_ERROR`: Internal server error

## API Implementation Notes

### Humanization Process Flow
1. Validate input parameters
2. Analyze original text for AI patterns
3. Apply humanization algorithms based on settings:
   - Paraphrase text to increase perplexity
   - Adjust sentence structures for burstiness
   - Enhance vocabulary diversity
   - Add human elements if enabled
4. Calculate detection scores for humanized text
5. Return humanized text with statistics

### Detection Process Flow
1. Validate input text
2. Analyze text for AI patterns:
   - Calculate perplexity score
   - Calculate burstiness score
   - Identify common AI patterns
3. Determine overall human-likeness score
4. Return analysis results

## Security Considerations
- Implement CORS restrictions
- Rate limiting to prevent abuse
- Input sanitization to prevent injection attacks
- No storage of submitted text (privacy protection)
- API key authentication for future premium features
